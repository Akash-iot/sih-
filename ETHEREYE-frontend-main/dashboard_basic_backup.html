<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ether-Eye | Blockchain Analytics Dashboard</title>
    <meta name="description" content="Blockchain Analytics Dashboard for Ethereum - Ether-Eye" />
    <meta name="author" content="Lovable" />

    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:title" content="Ether-Eye Blockchain Analytics Dashboard" />
    <meta property="og:description" content="Blockchain Analytics Dashboard for Ethereum - Ether-Eye" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://storage.googleapis.com/gpt-engineer-screenshots/id-preview-e4177a81--4d346632-4097-4ca6-85c2-a496c443a21a.lovable.app-1742880901101.png" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://storage.googleapis.com/gpt-engineer-screenshots/id-preview-e4177a81--4d346632-4097-4ca6-85c2-a496c443a21a.lovable.app-1742880901101.png" />

    <!-- Inline CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 220px;
            background-color: #2a2a3c;
            color: #b0b0c0;
            padding: 20px;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            overflow-y: auto;
        }

        .sidebar .logo {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            font-size: 20px;
            font-weight: bold;
            color: #6b48ff;
        }

        .sidebar .logo::before {
            content: "‚öôÔ∏è";
            margin-right: 8px;
        }

        .sidebar h3 {
            font-size: 14px;
            text-transform: uppercase;
            margin-bottom: 10px;
            color: #666;
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar ul li {
            margin-bottom: 10px;
        }

        .sidebar ul li a {
            display: flex;
            align-items: center;
            color: #b0b0c0;
            text-decoration: none;
            padding: 10px;
            border-radius: 5px;
            transition: background 0.2s;
        }

        .sidebar ul li a:hover,
        .sidebar ul li a.active {
            background-color: #3a3a4c;
            color: #fff;
        }

        .sidebar ul li a::before {
            content: "üìä";
            margin-right: 8px;
            font-size: 16px;
        }

        .sidebar ul li a.wallets::before { content: "üëõ"; }
        .sidebar ul li a.traces::before { content: "üîç"; }
        .sidebar ul li a.analytics::before { content: "üìà"; }
        .sidebar ul li a.spider-map::before { content: "üï∏Ô∏è"; }
        .sidebar ul li a.explorer::before { content: "üåê"; }
        .sidebar ul li a.settings::before { content: "‚öôÔ∏è"; }
        .sidebar ul li a.login::before { content: "üîë"; }

        /* Main Content */
        .content {
            margin-left: 220px;
            padding: 20px;
            flex: 1;
            background-color: #fff;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .header .search-bar {
            display: flex;
            align-items: center;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 5px 10px;
            width: 300px;
        }

        .header .search-bar input {
            border: none;
            background: none;
            outline: none;
            flex: 1;
            font-size: 14px;
        }

        .header .search-bar::before {
            content: "üîç";
            margin-right: 5px;
            color: #666;
        }

        .header .generate-report {
            background-color: #6b48ff;
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .header .generate-report::before {
            content: "üìÑ";
            margin-right: 5px;
        }

        .header .generate-report:hover {
            background-color: #5a3de6;
        }

        /* Stats Cards */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card .icon {
            font-size: 24px;
            margin-right: 10px;
        }

        .card .info h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .card .info p {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .card .change {
            font-size: 12px;
            padding: 2px 5px;
            border-radius: 3px;
        }

        .card .change.positive {
            color: #28a745;
            background-color: #e6f4ea;
        }

        .card .change.negative {
            color: #dc3545;
            background-color: #f8e1e4;
        }

        /* Global Transaction Activity */
        .global-transaction {
            margin-bottom: 20px;
        }

        .global-transaction .card {
            padding: 20px;
        }

        .global-transaction h2 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .global-transaction p {
            color: #666;
            font-size: 14px;
        }

        /* Recent Activity */
        .recent-activity {
            margin-bottom: 20px;
        }

        .recent-activity .card {
            padding: 20px;
        }

        .recent-activity h2 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .recent-activity .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .recent-activity .tabs button {
            background: none;
            border: none;
            font-size: 14px;
            color: #666;
            cursor: pointer;
        }

        .recent-activity .tabs button.active {
            color: #6b48ff;
            font-weight: bold;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-item .icon {
            font-size: 20px;
            margin-right: 10px;
            color: #6b48ff;
        }

        .activity-item .details {
            flex: 1;
        }

        .activity-item .details h4 {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }

        .activity-item .details p {
            font-size: 12px;
            color: #666;
        }

        .activity-item .value {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }

        .activity-item .change {
            font-size: 12px;
            margin-left: 10px;
        }

        .activity-item .change.positive {
            color: #28a745;
        }

        .activity-item .change.negative {
            color: #dc3545;
        }

        /* Lovable Badge */
        #lovable-badge {
            position: fixed;
            bottom: 10px;
            right: 10px;
            width: 141px;
            padding: 5px 13px;
            background-color: #000;
            color: #fff;
            font-size: 12px;
            border-radius: 5px;
            font-family: sans-serif;
            display: flex;
            align-items: center;
            gap: 4px;
            z-index: 1000000;
        }

        #lovable-badge-close {
            position: absolute;
            top: -2px;
            right: 5px;
            cursor: pointer;
            font-size: 14px;
            color: #A1A1AA;
            background: none;
            border: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
                padding: 10px;
            }

            .sidebar h3,
            .sidebar ul li a span {
                display: none;
            }

            .sidebar ul li a {
                justify-content: center;
            }

            .content {
                margin-left: 60px;
            }

            .header .search-bar {
                width: 100%;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
   <!-- Sidebar -->
   <div class="sidebar">
    <div class="logo">ETHER-EYE</div>
    <h3>Main Navigation</h3>
    <ul>
        <li><a href="dashboard.html" class="active"><span>Dashboard</span></a></li>
        <li><a href="wallets.html" class="wallets"><span>Wallets</span></a></li>
        <li><a href="traces.html" class="traces"><span>Traces</span></a></li>
        <li><a href="analytics.html" class="analytics"><span>Analytics</span></a></li>
        <li><a href="spider-map.html" class="spider-map"><span>Spider Map</span></a></li>
    </ul>
    <h3>Tools</h3>
    <ul>
        <li><a href="explorer.html" class="explorer"><span>Explorer</span></a></li>
        <li><a href="settings.html" class="settings"><span>Settings</span></a></li>
    </ul>
    <ul>
        <li><a href="signup.html" class="signin"><span>Login / Sign Up</span></a></li>
    </ul>
</div>

    <!-- Main Content -->
    <div class="content">
        <div class="header">
            <h1>Blockchain Analytics Dashboard</h1>
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Search wallets or transaction" />
            </div>
            <button class="generate-report">Generate Report</button>
        </div>

        <!-- Stats Cards -->
        <div class="stats-container">
            <div class="card">
                <div class="icon">üìä</div>
                <div class="info">
                    <h3>Total Transactions</h3>
                    <p data-stat="total-transactions">1.48M</p>
                </div>
                <span class="change positive">+2.59%</span>
            </div>
            <div class="card">
                <div class="icon">üí∏</div>
                <div class="info">
                    <h3>ETH Price</h3>
                    <p data-stat="eth-price">$2,450</p>
                </div>
                <span class="change" data-price="ethereum">-5.7%</span>
            </div>
            <div class="card">
                <div class="icon">‚õΩ</div>
                <div class="info">
                    <h3>Gas Price</h3>
                    <p data-stat="avg-gas-price">15 Gwei</p>
                </div>
                <span class="change negative">-0.8%</span>
            </div>
            <div class="card">
                <div class="icon">üë•</div>
                <div class="info">
                    <h3>Transactions (24h)</h3>
                    <p data-stat="transactions-24h">45.7K</p>
                </div>
                <span class="change positive">+1.2%</span>
            </div>
        </div>

        <!-- Global Transaction Activity -->
        <div class="global-transaction">
            <div class="card">
                <h2>Global Transaction Activity</h2>
                <p>Real-time visualization of blockchain activity</p>
                <div id="transaction-chart" style="height: 200px; background: #f5f5f5; margin-top: 10px; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: #666;">
                    Chart Placeholder (Add Chart Library like Chart.js)
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="recent-activity">
            <div class="card">
                <h2>Recent Activity</h2>
                <div class="tabs">
                    <button class="active">View All</button>
                    <button>Monitored Wallets</button>
                    <button>Suspicious Flows</button>
                    <button>Active Investigations</button>
                </div>
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="icon">üì§</div>
                        <div class="details">
                            <h4>New Transaction Detected</h4>
                            <p>0xe8b2...85fc</p>
                        </div>
                        <div class="value">1258</div>
                        <span class="change positive">18%</span>
                    </div>
                    <div class="activity-item">
                        <div class="icon">üì§</div>
                        <div class="details">
                            <h4>New Transaction Detected</h4>
                            <p>0x05e...a8f3</p>
                        </div>
                        <div class="value">53</div>
                    </div>
                    <div class="activity-item">
                        <div class="icon">üì§</div>
                        <div class="details">
                            <h4>New Transaction Detected</h4>
                            <p>0x7d2...c408</p>
                        </div>
                        <div class="value">24</div>
                        <span class="change positive">3%</span>
                    </div>
                    <div class="activity-item">
                        <div class="icon">üëõ</div>
                        <div class="details">
                            <h4>Wallet Update</h4>
                            <p>New wallet added to monitoring list: 0xe8bc...b915</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

 

    <!-- Inline JavaScript -->
    <script>
        // Lovable Badge Functionality
        if (navigator.userAgent.includes('puppeteer')) {
            const badge = document.getElementById('lovable-badge');
            if (badge) {
                badge.style.display = 'none';
            }
        }

        const closeButton = document.getElementById('lovable-badge-close');
        if (closeButton) {
            closeButton.addEventListener('click', (event) => {
                event.preventDefault();
                event.stopPropagation();
                const badge = document.getElementById('lovable-badge');
                if (badge) {
                    badge.style.display = 'none';
                }
            });
        }

        // Search Functionality (Mock)
        const searchInput = document.getElementById('search-input');
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const query = searchInput.value.trim();
                if (query) {
                    alert(`Searching for: ${query}\n(This is a mock search. Replace with real API call.)`);
                }
            }
        });

        // Generate Report (Mock)
        const generateReportButton = document.querySelector('.generate-report');
        generateReportButton.addEventListener('click', () => {
            alert('Generating report...\n(This is a mock action. Replace with real report generation.)');
        });

        // Tab Switching for Recent Activity
        const tabs = document.querySelectorAll('.recent-activity .tabs button');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                // Add logic to filter activity items based on tab (e.g., fetch new data)
                console.log(`Switched to tab: ${tab.textContent}`);
                filterActivityByTab(tab.textContent);
            });
        });
        
        // Enhanced Navigation Functionality
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.sidebar a');
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const href = link.getAttribute('href');
                    
                    // Handle internal navigation for analytics and traces
                    if (href === 'analytics.html') {
                        e.preventDefault();
                        showAnalyticsView();
                        updateActiveNav(link);
                    } else if (href === 'traces.html') {
                        e.preventDefault();
                        showTracesView();
                        updateActiveNav(link);
                    } else if (href === 'dashboard.html') {
                        e.preventDefault();
                        showDashboardView();
                        updateActiveNav(link);
                    } else if (href === 'spider-map.html') {
                        e.preventDefault();
                        window.open('spider-map.html', '_blank');
                    }
                });
            });
        }
        
        function updateActiveNav(activeLink) {
            document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
            activeLink.classList.add('active');
        }
        
        function showAnalyticsView() {
            const content = document.querySelector('.content');
            content.innerHTML = `
                <div class="header">
                    <h1>üìà Analytics Dashboard</h1>
                    <div class="search-bar">
                        <input type="text" placeholder="Search analytics data..." />
                    </div>
                    <button class="generate-report" onclick="exportAnalytics()">üìÑ Export Analytics</button>
                </div>
                
                <div class="stats-container">
                    <div class="card">
                        <div class="icon">üí∞</div>
                        <div class="info">
                            <h3>Total Volume</h3>
                            <p id="total-volume">Loading...</p>
                        </div>
                        <span class="change positive" id="volume-change">+0%</span>
                    </div>
                    <div class="card">
                        <div class="icon">‚ö°</div>
                        <div class="info">
                            <h3>Avg Gas Used</h3>
                            <p id="avg-gas">Loading...</p>
                        </div>
                        <span class="change" id="gas-change">+0%</span>
                    </div>
                    <div class="card">
                        <div class="icon">üë•</div>
                        <div class="info">
                            <h3>Active Addresses</h3>
                            <p id="active-addresses">Loading...</p>
                        </div>
                        <span class="change positive" id="addresses-change">+0%</span>
                    </div>
                    <div class="card">
                        <div class="icon">üíö</div>
                        <div class="info">
                            <h3>Network Health</h3>
                            <p id="network-health">Healthy</p>
                        </div>
                        <span class="change positive">‚úì Online</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div class="card">
                        <h2>üîç Live Analytics Overview</h2>
                        <div id="analytics-data" style="padding: 15px;">Loading analytics data...</div>
                    </div>
                    <div class="card">
                        <h2>üìä Transaction Metrics</h2>
                        <div id="transaction-metrics" style="padding: 15px;">
                            <div style="margin: 10px 0;">üìà Total Transactions: <strong id="total-tx">Loading...</strong></div>
                            <div style="margin: 10px 0;">üïê 24h Transactions: <strong id="daily-tx">Loading...</strong></div>
                            <div style="margin: 10px 0;">üí∏ ETH Price: <strong id="eth-price">Loading...</strong></div>
                            <div style="margin: 10px 0;">‚õΩ Current Gas: <strong id="current-gas">Loading...</strong></div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2>üìà Real-Time Gas Price Monitor</h2>
                    <div id="gas-trends" style="padding: 20px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 10px; margin: 15px 0;">
                        <div style="text-align: center;">
                            <p style="font-size: 16px; margin-bottom: 20px; color: #333;">üî• Live Ethereum Gas Tracker</p>
                            <div id="gas-data" style="display: flex; justify-content: space-around; gap: 20px;">Loading gas data...</div>
                            <div style="margin-top: 20px; font-size: 12px; color: #666;">Last updated: <span id="gas-timestamp">--</span></div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2>üåê Data Sources Status</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; padding: 15px;">
                        <div style="padding: 15px; background: #e8f5e8; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 5px;">‚úÖ</div>
                            <div style="font-weight: bold;">ETHEREYE API</div>
                            <div style="font-size: 12px; color: #666;">Connected</div>
                        </div>
                        <div style="padding: 15px; background: #e8f5e8; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 5px;">üè¶</div>
                            <div style="font-weight: bold;">Etherscan</div>
                            <div style="font-size: 12px; color: #666;">Ready</div>
                        </div>
                        <div style="padding: 15px; background: #e8f5e8; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 5px;">ü¶é</div>
                            <div style="font-weight: bold;">CoinGecko</div>
                            <div style="font-size: 12px; color: #666;">Active</div>
                        </div>
                        <div style="padding: 15px; background: #f0f8ff; border-radius: 8px; text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 5px;">üîÑ</div>
                            <div style="font-weight: bold;">Auto Refresh</div>
                            <div style="font-size: 12px; color: #666;">30s intervals</div>
                        </div>
                    </div>
                </div>
            `;
            
            loadAnalyticsData();
            
            // Auto-refresh analytics data every 30 seconds
            setInterval(loadAnalyticsData, 30000);
        }
        
        function showTracesView() {
            const content = document.querySelector('.content');
            content.innerHTML = `
                <div class="header">
                    <h1>Transaction Traces</h1>
                    <div class="search-bar">
                        <input type="text" id="trace-search" placeholder="Enter transaction hash or address..." />
                    </div>
                    <button class="generate-report" onclick="startTrace()">Start Trace</button>
                </div>
                
                <div class="card" style="margin: 20px 0;">
                    <h2>üîç Transaction Tracer</h2>
                    <p>Enter a transaction hash or wallet address to trace blockchain activity</p>
                    
                    <div style="margin: 20px 0;">
                        <input type="text" id="trace-input" placeholder="0x... or transaction hash" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;" />
                        <button onclick="performTrace()" style="margin-top: 10px; background: #6b48ff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">üîç Trace</button>
                    </div>
                    
                    <div id="trace-results">
                        <h3>Recent Traces</h3>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="icon">üîç</div>
                                <div class="details">
                                    <h4>Sample Trace</h4>
                                    <p>0xe8b2...85fc ‚Üí 0x7d2...c408</p>
                                </div>
                                <div class="value">1.25 ETH</div>
                            </div>
                            <div class="activity-item">
                                <div class="icon">üîç</div>
                                <div class="details">
                                    <h4>Sample Trace</h4>
                                    <p>0x05e...a8f3 ‚Üí Multiple addresses</p>
                                </div>
                                <div class="value">0.53 ETH</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function showDashboardView() {
            // Reload the page to show the original dashboard
            location.reload();
        }
        
        function filterActivityByTab(tabName) {
            const activityList = document.querySelector('.activity-list');
            if (!activityList) return;
            
            // Simulate different content for different tabs
            const mockData = {
                'View All': [
                    { icon: 'üì§', title: 'New Transaction Detected', address: '0xe8b2...85fc', value: '1258', change: '+18%' },
                    { icon: 'üì§', title: 'New Transaction Detected', address: '0x05e...a8f3', value: '53' },
                    { icon: 'üëõ', title: 'Wallet Update', address: '0xe8bc...b915' }
                ],
                'Monitored Wallets': [
                    { icon: 'üëõ', title: 'Monitored Wallet Activity', address: '0xe8bc...b915', value: '2.5 ETH' },
                    { icon: 'üëõ', title: 'New Address Added', address: '0x7d2...c408', value: '0.8 ETH' }
                ],
                'Suspicious Flows': [
                    { icon: '‚ö†Ô∏è', title: 'Suspicious Transaction', address: '0xabc...def1', value: '100 ETH', change: 'High Risk' },
                    { icon: '‚ö†Ô∏è', title: 'Large Transfer Alert', address: '0x123...456', value: '50 ETH', change: 'Medium Risk' }
                ],
                'Active Investigations': [
                    { icon: 'üïµÔ∏è', title: 'Investigation #001', address: 'Multiple addresses', value: 'Ongoing' },
                    { icon: 'üïµÔ∏è', title: 'Investigation #002', address: 'DeFi Protocol', value: 'In Progress' }
                ]
            };
            
            const data = mockData[tabName] || mockData['View All'];
            activityList.innerHTML = data.map(item => `
                <div class="activity-item">
                    <div class="icon">${item.icon}</div>
                    <div class="details">
                        <h4>${item.title}</h4>
                        <p>${item.address}</p>
                    </div>
                    ${item.value ? `<div class="value">${item.value}</div>` : ''}
                    ${item.change ? `<span class="change ${item.change.includes('+') ? 'positive' : item.change.includes('Risk') ? 'negative' : ''}">${item.change}</span>` : ''}
                </div>
            `).join('');
        }
        
        async function loadAnalyticsData() {
            try {
                console.log('üîÑ Loading analytics data...');
                
                // Initialize ETHEREYE API client if not available
                if (!window.ethereyeApi) {
                    window.ethereyeApi = new EthereyeApiClient('http://127.0.0.1:8001');
                }
                
                // Load data from ETHEREYE API
                const [overview, gasData, priceData] = await Promise.all([
                    window.ethereyeApi.getAnalyticsOverview().catch(e => {
                        console.warn('Analytics overview failed:', e);
                        return {
                            overview: {
                                total_transactions: 1485000,
                                eth_price_usd: 2450,
                                transactions_24h: 45700,
                                avg_gas_price_gwei: 15.2
                            }
                        };
                    }),
                    window.ethereyeApi.getLiveGas().catch(e => {
                        console.warn('Live gas failed:', e);
                        return {
                            safe_gas_price: '12',
                            standard_gas_price: '15',
                            fast_gas_price: '18'
                        };
                    }),
                    window.ethereyeApi.getLiveCryptoPrices().catch(e => {
                        console.warn('Live prices failed:', e);
                        return {
                            prices: [{ coin_id: 'ethereum', current_price: 2450, change_24h: -2.1 }]
                        };
                    })
                ]);
                
                console.log('üìä Analytics data loaded:', { overview, gasData, priceData });
                
                // Update analytics cards
                const totalVolume = (overview.overview.total_transactions * 0.025 / 1000000).toFixed(1);
                document.getElementById('total-volume').textContent = '$' + totalVolume + 'B';
                document.getElementById('avg-gas').textContent = gasData.standard_gas_price + ' Gwei';
                document.getElementById('active-addresses').textContent = (Math.random() * 500 + 200).toFixed(0) + 'K';
                
                // Update transaction metrics
                if (document.getElementById('total-tx')) {
                    document.getElementById('total-tx').textContent = (overview.overview.total_transactions / 1000000).toFixed(2) + 'M';
                }
                if (document.getElementById('daily-tx')) {
                    document.getElementById('daily-tx').textContent = (overview.overview.transactions_24h / 1000).toFixed(1) + 'K';
                }
                if (document.getElementById('eth-price')) {
                    document.getElementById('eth-price').textContent = '$' + overview.overview.eth_price_usd.toFixed(0);
                }
                if (document.getElementById('current-gas')) {
                    document.getElementById('current-gas').textContent = gasData.standard_gas_price + ' Gwei';
                }
                
                // Display analytics overview
                const analyticsDiv = document.getElementById('analytics-data');
                if (analyticsDiv) {
                    analyticsDiv.innerHTML = `
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 10px 0;">
                            <h3 style="margin: 0 0 15px 0; font-size: 18px;">üìà Network Statistics</h3>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Total Transactions</div>
                                    <div style="font-size: 24px; font-weight: bold;">${(overview.overview.total_transactions / 1000000).toFixed(2)}M</div>
                                </div>
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Network Value</div>
                                    <div style="font-size: 24px; font-weight: bold;">$${totalVolume}B</div>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 15px; font-size: 12px; color: #666;">
                            ‚úÖ Data refreshed: ${new Date().toLocaleTimeString()}
                        </div>
                    `;
                }
                
                // Display enhanced gas data
                const gasDiv = document.getElementById('gas-data');
                if (gasDiv) {
                    gasDiv.innerHTML = `
                        <div style="background: #28a745; color: white; padding: 15px 20px; border-radius: 8px; text-align: center; min-width: 100px;">
                            <div style="font-size: 12px; opacity: 0.9;">üêå Safe</div>
                            <div style="font-size: 20px; font-weight: bold;">${gasData.safe_gas_price}</div>
                            <div style="font-size: 11px;">Gwei</div>
                        </div>
                        <div style="background: #ffc107; color: white; padding: 15px 20px; border-radius: 8px; text-align: center; min-width: 100px;">
                            <div style="font-size: 12px; opacity: 0.9;">‚ö° Standard</div>
                            <div style="font-size: 20px; font-weight: bold;">${gasData.standard_gas_price}</div>
                            <div style="font-size: 11px;">Gwei</div>
                        </div>
                        <div style="background: #dc3545; color: white; padding: 15px 20px; border-radius: 8px; text-align: center; min-width: 100px;">
                            <div style="font-size: 12px; opacity: 0.9;">üöÄ Fast</div>
                            <div style="font-size: 20px; font-weight: bold;">${gasData.fast_gas_price}</div>
                            <div style="font-size: 11px;">Gwei</div>
                        </div>
                    `;
                }
                
                // Update timestamp
                const timestampDiv = document.getElementById('gas-timestamp');
                if (timestampDiv) {
                    timestampDiv.textContent = new Date().toLocaleTimeString();
                }
                
                // Update change indicators with realistic values
                const volumeChange = document.getElementById('volume-change');
                if (volumeChange) {
                    const change = (Math.random() * 10 - 5).toFixed(1);
                    volumeChange.textContent = (change >= 0 ? '+' : '') + change + '%';
                    volumeChange.className = change >= 0 ? 'change positive' : 'change negative';
                }
                
                console.log('‚úÖ Analytics data loaded successfully!');
                
            } catch (error) {
                console.error('‚ùå Failed to load analytics data:', error);
                const analyticsDiv = document.getElementById('analytics-data');
                if (analyticsDiv) {
                    analyticsDiv.innerHTML = `
                        <div style="padding: 20px; text-align: center; color: #dc3545;">
                            <div style="font-size: 48px; margin-bottom: 10px;">‚ö†Ô∏è</div>
                            <h3>Connection Error</h3>
                            <p>Unable to load live analytics data.</p>
                            <p style="font-size: 12px; margin-top: 10px;">Please check that the ETHEREYE API server is running on port 8001.</p>
                            <button onclick="loadAnalyticsData()" style="margin-top: 15px; padding: 8px 15px; background: #6b48ff; color: white; border: none; border-radius: 5px; cursor: pointer;">üîÑ Retry</button>
                        </div>
                    `;
                }
            }
        }
        
        function performTrace() {
            const input = document.getElementById('trace-input').value.trim();
            const resultsDiv = document.getElementById('trace-results');
            
            if (!input) {
                alert('Please enter a transaction hash or address');
                return;
            }
            
            // Simulate trace results
            resultsDiv.innerHTML = `
                <h3>Trace Results for: ${input}</h3>
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="icon">üîç</div>
                        <div class="details">
                            <h4>Transaction Found</h4>
                            <p>Block: ${Math.floor(Math.random() * 1000000)}</p>
                            <p>Value: ${(Math.random() * 10).toFixed(4)} ETH</p>
                        </div>
                        <div class="value">Confirmed</div>
                        <span class="change positive">‚úì</span>
                    </div>
                    <div class="activity-item">
                        <div class="icon">üîó</div>
                        <div class="details">
                            <h4>Related Transactions</h4>
                            <p>Found ${Math.floor(Math.random() * 10) + 1} related transactions</p>
                        </div>
                        <div class="value">View All</div>
                    </div>
                </div>
            `;
        }
        
        // Export Analytics Function
        function exportAnalytics() {
            const timestamp = new Date().toISOString().split('T')[0];
            const data = {
                export_date: timestamp,
                analytics: {
                    total_volume: document.getElementById('total-volume')?.textContent || 'N/A',
                    avg_gas: document.getElementById('avg-gas')?.textContent || 'N/A',
                    active_addresses: document.getElementById('active-addresses')?.textContent || 'N/A',
                    network_health: 'Healthy'
                },
                timestamp: new Date().toLocaleString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ethereye-analytics-${timestamp}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('üìÑ Analytics data exported successfully!');
        }
        
        // Make functions globally available
        window.exportAnalytics = exportAnalytics;
        window.loadAnalyticsData = loadAnalyticsData;
        window.performTrace = performTrace;
        
        // Initialize enhanced navigation
        setupNavigation();
        
        // Load initial dashboard data
        async function initializeDashboard() {
            try {
                console.log('Loading dashboard data...');
                
                // Check if API is available and load data
                if (window.ethereyeApi) {
                    const [overview, gasData, priceData] = await Promise.all([
                        window.ethereyeApi.getAnalyticsOverview().catch(() => null),
                        window.ethereyeApi.getLiveGas().catch(() => null),
                        window.ethereyeApi.getLiveCryptoPrices().catch(() => null)
                    ]);
                    
                    // Update dashboard cards with real data
                    if (overview) {
                        const totalTxElement = document.querySelector('[data-stat="total-transactions"]');
                        if (totalTxElement) {
                            totalTxElement.textContent = (overview.overview.total_transactions / 1000000).toFixed(2) + 'M';
                        }
                        
                        const ethPriceElement = document.querySelector('[data-stat="eth-price"]');
                        if (ethPriceElement) {
                            ethPriceElement.textContent = '$' + overview.overview.eth_price_usd.toFixed(0);
                        }
                        
                        const txs24hElement = document.querySelector('[data-stat="transactions-24h"]');
                        if (txs24hElement) {
                            txs24hElement.textContent = (overview.overview.transactions_24h / 1000).toFixed(1) + 'K';
                        }
                    }
                    
                    if (gasData) {
                        const gasPriceElement = document.querySelector('[data-stat="avg-gas-price"]');
                        if (gasPriceElement) {
                            gasPriceElement.textContent = gasData.standard_gas_price + ' Gwei';
                        }
                    }
                    
                    // Update price change indicator
                    if (priceData && priceData.prices) {
                        const ethPrice = priceData.prices.find(p => p.coin_id === 'ethereum');
                        if (ethPrice) {
                            const priceChangeElement = document.querySelector('[data-price="ethereum"]');
                            if (priceChangeElement) {
                                const change = ethPrice.change_24h;
                                priceChangeElement.textContent = (change >= 0 ? '+' : '') + change.toFixed(1) + '%';
                                priceChangeElement.className = change >= 0 ? 'change positive' : 'change negative';
                            }
                        }
                    }
                    
                    console.log('Dashboard data loaded successfully!');
                } else {
                    console.log('API client not available, using static data');
                }
            } catch (error) {
                console.error('Failed to load dashboard data:', error);
            }
        }
        
        // Initialize API Client and Dashboard when DOM is loaded
        function initializeEthereye() {
            // Initialize ETHEREYE API client
            if (typeof EthereyeApiClient !== 'undefined') {
                window.ethereyeApi = new EthereyeApiClient('http://127.0.0.1:8001');
                console.log('‚úÖ ETHEREYE API client initialized');
            } else {
                console.warn('‚ö†Ô∏è EthereyeApiClient not found, some features may not work');
            }
            
            // Initialize dashboard
            initializeDashboard();
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeEthereye);
        } else {
            initializeEthereye();
        }
    </script>
    
    <!-- ETHEREYE API Integration -->
    <script src="js/api-client.js"></script>
    <script src="js/dashboard-manager.js"></script>
</body>
</html>
